---
title: 使用说明
icon: lightbulb
sidebar: false
---

## 视频

- 前台

<iframe src="//player.bilibili.com/player.html?isOutside=true&aid=114170213171277&bvid=BV1PcQbY4ESK&cid=28890695587&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>

- 后台

<iframe src="//player.bilibili.com/player.html?isOutside=true&aid=114170162840569&bvid=BV1NfQtYZEyF&cid=28890500346&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>

## 常用功能

### 1.创建用户

*前台用户* 有两个创建方式：

1. 后台管理-`用户`菜单中，可以新增用户；
2. 注册功能：注册功能默认是关闭的，需要在后台管理的`系统管理`中，开放注册功能后，可以在前台登录页面进行注册。

*后台用户* 有且仅有一个，无法新增，账号密码通过docker环境变量配置，修改后需要重新启动容器。

### 2.CSV流水导入

> csv导入功能是为第三方互联网金融公司的账单文件快速导入而开发的功能，如支付宝账单、微信账单、京东金融账单。

1. 导出流水文件的方法可阅读：【[微信/支付宝/京东金融导出账单文件](https://www.oldmoon.top/post/211)】。
2. 导出流水后，请不要进行任何编辑，直接在系统中 `流水管理 --> 导入导出 --> 支付宝CSV导入` 开始导入流水。

### 3.JSON流水导入(历史流水导入)

> Json流水导入功能是为本系统自身数据导入导出开发的功能，便于用户备份和恢复重要的流水数据。

在 `流水管理 --> 导入导出 --> Json导入/导出` 可以快速导入和导出当前账本的数据！

### 4.修改密码

- *普通用户* 修改密码可以通过前台 `系统设置 - 修改密码` 进行修改，如果忘记了原密码，可以前往后台管理修改密码，后台修改密码无需原密码！

- *后台用户* 无法通过任何页面/接口修改密码，只能通过修改docker容器 环境变量 并重启服务来修改密码！

### 5.类型名称修改

- 单条流水类型修改

通过 `流水管理` 中编辑流水，可以针对单条流水进行类型名修改；

- 类型转换（同一类型流水批量改为其他类型）

通过 `类型管理` 中编辑类型，进行类型名称修改，会将原类型的全部流水名称统一修改为其他类型。

> 注意：类型转换只能修改 `支付方式/收款方式` 或 `消费类型/收入类型`，无法将 `收入` 批量改为 `支出`。

## 重要概念

### 后台

#### 1.访问后台

演示站主站地址为 `https://cashbook.oldmoon.top`，则后台地址为 `https://cashbook.oldmoon.top/admin`，即URL拼接上 `/admin`。

#### 2.开启/关闭前台注册入口

进入后台，访问 `系统设置` 菜单，修改 `是否开放注册功能?` 值即可。

#### 3.更新后台密码

前往密码加密页，重新生成账号密码，然后修改 `docker-compose.yaml` 中的环境变量重启即可。

#### 4.管理用户

进入后台，访问 `用户` 菜单，可以管理 `Cashbook` 所有用户，包括：查看用户信息，修改用户（包括改密），新增用户，删除用户。

#### 5.管理帐本

进入后台，访问 `账本` 菜单，可以管理 `Cashbook` 所有用户，只能：查看账本信息，删除账本。

### 前台

#### 1.注册账户

前台注册功能默认是关闭的，如果想要开放注册功能，请前往后台 - 系统设置中开启！

#### 2.类型管理

在前台类型管理页面中，展示的数据列表是当前帐本中存在的流水数据类型，修改一个类型名称，将会把当前帐本中所有的流水数据中该类型的名称统一替换。

### 类型映射

现在系统设置中可以进行交易类型的映射关系维护了，下面列出项目默认的映射关系，用户安装后可自行修改。

默认映射关系如下：

```json
// key 是 支付宝/微信/京东金融 账单中的消费类型
// value 是账单导入系统后数据库中保存的类型
{
  "食品酒饮": "餐饮美食",
  "餐饮美食": "餐饮美食",
  "家居家装": "日用百货",
  "日用百货": "日用百货",
  "鞋服箱包": "日用百货",
  "清洁纸品": "日用百货",
  "医疗保健": "医疗健康",
  "医疗健康": "医疗健康",
  "充值缴费": "充值缴费",
  "教育培训": "教育培训",
  "图书文娱": "文化休闲",
  "运动户外": "文化休闲",
  "文体玩具": "文化休闲",
  "文化休闲": "文化休闲",
  "微信红包": "转账红包",
  "微信红包（单发）": "转账红包",
  "微信红包（群红包）": "转账红包",
  "转账红包": "转账红包",
  "转账": "转账红包",
  "二维码收款": "微信交易",
  "微信交易": "微信交易",
  "商户消费": "微信交易",
  "扫二维码付款": "微信交易",
  "小金库": "投资理财",
  "投资理财": "投资理财",
  "收入": "投资理财",
  "转入零钱通-来自零钱": "投资理财",
  "手机通讯": "数码电器",
  "数码电器": "数码电器",
  "电脑办公": "数码电器",
  "服饰内衣": "服饰装扮",
  "服饰装扮": "服饰装扮",
  "钟表眼镜": "服饰装扮",
  "美妆个护": "美容美发",
  "美容美发": "美容美发",
  "汽车用品": "爱车养车",
  "爱车养车": "爱车养车",
  "亲友代付": "亲友代付",
  "亲属卡交易": "亲友代付",
  "亲属卡交易-退款": "退款",
  "美团平台商户-退款": "退款",
  "退款": "退款",
}
```

> **提示**：如果你认为其中的类型映射不合理，可以在系统部署后自行修改，修改方式下面会详细说明。
>
> PS：如果你还不会账单导出，这里有一个图文教程：[微信/支付宝/京东金融导出账单文件](https://oldmoon.top/post/211)

#### 类型映射关系修改

后台全局修改

1. 系统部署后，访问 `url/admin` 登录后台，其中 `url` 是你的服务地址；
2. 登录后台后，进入 `类型数据` 菜单，页面数据列表会列出映射关系（默认映射关系的`账本Id` 和 `用户Id` 都是 `0`）；
3. 修改任意映射关系并保存即可。

> 注意：
>
> 1. 后台只能新增默认映射关系；  
> 2. 后台可以修改/删除全局所有映射关系；  
> 3. 默认映射关系会在创建账本时自动应用到新帐本，在 **创建账本之后，账本映射关系和默认映射关系就相互独立了，相同的关系想要全局修改，需要分别修改默认关系和每个账本中的关系！！！**

前台账本配置

1. 前台修改入口有两个：`系统管理 -> CSV导入映射配置` / `类型管理 -> CSV导入映射配置`；
2. 进入后编辑关系保存即可，编辑的数据只会应用到当前打开的账本！
